{
  "$schema": "https://kitn.dev/schema/registry-item.json",
  "name": "weather-tool",
  "type": "kitn:tool",
  "description": "Get current weather information for any location using Open-Meteo API",
  "dependencies": [
    "ai",
    "zod"
  ],
  "registryDependencies": [],
  "envVars": {},
  "files": [
    {
      "path": "tools/weather.ts",
      "content": "import { tool } from \"ai\";\nimport { z } from \"zod\";\n\nconst GEOCODING_URL = \"https://geocoding-api.open-meteo.com/v1/search\";\nconst WEATHER_URL = \"https://api.open-meteo.com/v1/forecast\";\n\nfunction describeWeatherCode(code: number): string {\n  if (code === 0) return \"Clear sky\";\n  if (code === 1) return \"Mainly clear\";\n  if (code === 2) return \"Partly cloudy\";\n  if (code === 3) return \"Overcast\";\n  if (code === 45 || code === 48) return \"Foggy\";\n  if (code >= 51 && code <= 55) return \"Drizzle\";\n  if (code >= 61 && code <= 65) return \"Rain\";\n  if (code >= 71 && code <= 75) return \"Snow\";\n  if (code === 77) return \"Snow grains\";\n  if (code >= 80 && code <= 82) return \"Rain showers\";\n  if (code >= 85 && code <= 86) return \"Snow showers\";\n  if (code === 95) return \"Thunderstorm\";\n  if (code >= 96 && code <= 99) return \"Thunderstorm with hail\";\n  return \"Unknown\";\n}\n\nfunction toFahrenheit(celsius: number): number {\n  return Math.round((celsius * 9) / 5 + 32);\n}\n\nexport const weatherTool = tool({\n  description:\n    \"Get current weather information for a location. Returns temperature, humidity, wind speed, and conditions.\",\n  inputSchema: z.object({\n    location: z\n      .string()\n      .describe(\"City name or location (e.g. 'Tokyo', 'New York')\"),\n  }),\n  execute: async ({ location }) => {\n    const geoRes = await fetch(\n      `${GEOCODING_URL}?name=${encodeURIComponent(location)}&count=1&language=en&format=json`\n    );\n    if (!geoRes.ok) {\n      throw new Error(`Geocoding failed: ${geoRes.statusText}`);\n    }\n    const geoData = await geoRes.json();\n    const place = geoData.results?.[0];\n    if (!place) {\n      throw new Error(`Location not found: \"${location}\"`);\n    }\n\n    const { latitude, longitude, name, country } = place;\n\n    const params = new URLSearchParams({\n      latitude: String(latitude),\n      longitude: String(longitude),\n      current: [\n        \"temperature_2m\",\n        \"apparent_temperature\",\n        \"relative_humidity_2m\",\n        \"weather_code\",\n        \"wind_speed_10m\",\n        \"wind_direction_10m\",\n        \"visibility\",\n        \"uv_index\",\n        \"precipitation\",\n      ].join(\",\"),\n      wind_speed_unit: \"kmh\",\n      timezone: \"auto\",\n    });\n\n    const weatherRes = await fetch(`${WEATHER_URL}?${params}`);\n    if (!weatherRes.ok) {\n      throw new Error(`Weather API failed: ${weatherRes.statusText}`);\n    }\n    const weatherData = await weatherRes.json();\n    const c = weatherData.current;\n\n    const tempC = c.temperature_2m;\n    const feelsLikeC = c.apparent_temperature;\n    const windKmph = c.wind_speed_10m;\n\n    return {\n      location: `${name}, ${country}`,\n      coordinates: { latitude, longitude },\n      temperature: {\n        celsius: tempC,\n        fahrenheit: toFahrenheit(tempC),\n      },\n      feelsLike: {\n        celsius: feelsLikeC,\n        fahrenheit: toFahrenheit(feelsLikeC),\n      },\n      humidity: c.relative_humidity_2m,\n      description: describeWeatherCode(c.weather_code),\n      weatherCode: c.weather_code,\n      windSpeed: {\n        kmph: windKmph,\n        mph: Math.round(windKmph / 1.609),\n      },\n      windDirection: c.wind_direction_10m,\n      visibility: c.visibility,\n      uvIndex: c.uv_index,\n      precipitation: c.precipitation,\n      timezone: weatherData.timezone,\n    };\n  },\n});\n",
      "type": "kitn:tool"
    }
  ],
  "docs": "The weather tool auto-registers on import. Use it directly or assign it to an agent.",
  "categories": [
    "weather",
    "api"
  ],
  "version": "1.0.0",
  "updatedAt": "2026-02-25T18:59:36.493Z"
}
