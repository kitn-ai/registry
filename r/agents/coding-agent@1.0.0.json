{
  "$schema": "https://kitn.dev/schema/registry-item.json",
  "name": "coding-agent",
  "type": "kitn:agent",
  "description": "Code generation and execution agent with sandboxed JavaScript runtime",
  "dependencies": [
    "ai",
    "zod"
  ],
  "registryDependencies": [],
  "envVars": {},
  "files": [
    {
      "path": "agents/coding-agent.ts",
      "content": "import { tool } from \"ai\";\nimport { z } from \"zod\";\nimport vm from \"node:vm\";\n\nconst SYSTEM_PROMPT = `You are a coding agent that writes and executes JavaScript code to solve problems.\n\nWhen asked to solve a problem:\n1. Write clear, well-commented JavaScript code\n2. Use the executeCode tool to run it\n3. Analyze the output and present the results\n\nGuidelines:\n- Write pure JavaScript (no imports/requires)\n- Use console.log() for output\n- Keep code concise and focused\n- Handle edge cases\n- The execution environment is sandboxed with no file system or network access`;\n\nconst executeCodeTool = tool({\n  description:\n    \"Execute JavaScript code in a sandboxed environment. Use console.log() for output.\",\n  inputSchema: z.object({\n    code: z.string().describe(\"JavaScript code to execute\"),\n    description: z\n      .string()\n      .optional()\n      .describe(\"Brief description of what the code does\"),\n  }),\n  execute: async ({ code, description }) => {\n    const logs: string[] = [];\n    const errors: string[] = [];\n\n    const sandbox = {\n      console: {\n        log: (...args: unknown[]) =>\n          logs.push(args.map(String).join(\" \")),\n        error: (...args: unknown[]) =>\n          errors.push(args.map(String).join(\" \")),\n        warn: (...args: unknown[]) =>\n          logs.push(`[warn] ${args.map(String).join(\" \")}`),\n      },\n      Math,\n      Date,\n      JSON,\n      Array,\n      Object,\n      String,\n      Number,\n      Boolean,\n      Map,\n      Set,\n      RegExp,\n      Error,\n      parseInt,\n      parseFloat,\n      isNaN,\n      isFinite,\n    };\n\n    try {\n      const context = vm.createContext(sandbox);\n      const result = vm.runInNewContext(code, context, {\n        timeout: 5000,\n        displayErrors: true,\n      });\n\n      return {\n        success: true,\n        description: description ?? \"Code execution\",\n        output: logs.join(\"\\n\"),\n        errors: errors.length > 0 ? errors.join(\"\\n\") : undefined,\n        returnValue: result !== undefined ? String(result) : undefined,\n      };\n    } catch (err: any) {\n      return {\n        success: false,\n        description: description ?? \"Code execution\",\n        output: logs.join(\"\\n\"),\n        error: err.message,\n      };\n    }\n  },\n});\n\nexport const CODING_AGENT_CONFIG = {\n  system: SYSTEM_PROMPT,\n  tools: { executeCode: executeCodeTool },\n};\n",
      "type": "kitn:agent"
    }
  ],
  "docs": "The coding agent writes and executes JavaScript in a sandboxed vm context. No file system or network access in the sandbox.",
  "categories": [
    "coding",
    "execution"
  ],
  "version": "1.0.0",
  "updatedAt": "2026-02-25T18:59:36.475Z"
}
